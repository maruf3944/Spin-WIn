<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Spin - Lottery Wheel</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) translateX(var(--tx));
                opacity: 0;
            }
        }
        
        @keyframes confetti-spin {
            to {
                transform: rotate(720deg);
            }
        }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes scale-in {
            from {
                transform: scale(0.5);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes bounce-in {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .animate-confetti-fall {
            animation: confetti-fall linear forwards;
        }
        
        .animate-confetti-spin {
            animation: confetti-spin linear infinite;
        }
        
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
        
        .animate-scale-in {
            animation: scale-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .animate-bounce-in {
            animation: bounce-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Icon Components
        const Sparkles = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
                <path d="M5 3v4"/>
                <path d="M19 17v4"/>
                <path d="M3 5h4"/>
                <path d="M17 19h4"/>
            </svg>
        );

        const Plus = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M5 12h14"/>
                <path d="M12 5v14"/>
            </svg>
        );

        const Trash2 = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 6h18"/>
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                <line x1="10" x2="10" y1="11" y2="17"/>
                <line x1="14" x2="14" y1="11" y2="17"/>
            </svg>
        );

        const Play = ({ size = 24, fill = "none", className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );

        const Trophy = ({ size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                <path d="M4 22h16"/>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
        );

        function LotteryWheel() {
            const [names, setNames] = useState(['Alice', 'Bob', 'Charlie', 'Diana', 'Emma', 'Frank', 'Grace', 'Henry']);
            const [newName, setNewName] = useState('');
            const [isSpinning, setIsSpinning] = useState(false);
            const [winner, setWinner] = useState(null);
            const [rotation, setRotation] = useState(0);
            const [showConfetti, setShowConfetti] = useState(false);
            const [confettiPieces, setConfettiPieces] = useState([]);
            const [isMobile, setIsMobile] = useState(window.innerWidth < 640);
            const wheelRef = useRef(null);

            useEffect(() => {
                const handleResize = () => setIsMobile(window.innerWidth < 640);
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            useEffect(() => {
                if (showConfetti) {
                    const pieces = Array.from({ length: 150 }, (_, i) => ({
                        id: i,
                        left: Math.random() * 100,
                        animationDelay: Math.random() * 0.5,
                        animationDuration: 2 + Math.random() * 2,
                        color: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#F7DC6F', '#BB8FCE', '#85C1E2', '#FFD93D'][Math.floor(Math.random() * 8)],
                        size: 8 + Math.random() * 8,
                        rotation: Math.random() * 360,
                        tx: Math.random() * 200 - 100
                    }));
                    setConfettiPieces(pieces);

                    const timer = setTimeout(() => {
                        setShowConfetti(false);
                    }, 5000);

                    return () => clearTimeout(timer);
                }
            }, [showConfetti]);

            const addName = () => {
                if (newName.trim() && !names.includes(newName.trim()) && names.length < 12) {
                    setNames([...names, newName.trim()]);
                    setNewName('');
                }
            };

            const removeName = (nameToRemove) => {
                if (names.length > 2) {
                    setNames(names.filter(n => n !== nameToRemove));
                    if (winner === nameToRemove) {
                        setWinner(null);
                    }
                }
            };

            const spinWheel = () => {
                if (isSpinning || names.length === 0) return;
                
                setIsSpinning(true);
                setWinner(null);
                setShowConfetti(false);
                
                const spins = 6 + Math.random() * 4;
                const extraDegrees = Math.random() * 360;
                const totalRotation = rotation + (spins * 360) + extraDegrees;
                
                setRotation(totalRotation);
                
                setTimeout(() => {
                    const normalizedRotation = totalRotation % 360;
                    const segmentAngle = 360 / names.length;
                    const pointerAngle = 90;
                    const adjustedAngle = (normalizedRotation + pointerAngle) % 360;
                    const winnerIndex = Math.floor(adjustedAngle / segmentAngle) % names.length;
                    
                    setWinner(names[winnerIndex]);
                    setIsSpinning(false);
                    setShowConfetti(true);
                }, 5000);
            };

            const segmentAngle = 360 / names.length;
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4 sm:p-8 flex items-center justify-center overflow-hidden relative">
                    {/* Confetti Animation */}
                    {showConfetti && (
                        <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
                            {confettiPieces.map((piece) => (
                                <div
                                    key={piece.id}
                                    className="absolute top-0 animate-confetti-fall"
                                    style={{
                                        left: `${piece.left}%`,
                                        animationDelay: `${piece.animationDelay}s`,
                                        animationDuration: `${piece.animationDuration}s`,
                                        '--tx': `${piece.tx}px`
                                    }}
                                >
                                    <div
                                        className="animate-confetti-spin"
                                        style={{
                                            width: `${piece.size}px`,
                                            height: `${piece.size}px`,
                                            backgroundColor: piece.color,
                                            transform: `rotate(${piece.rotation}deg)`,
                                            animationDuration: `${piece.animationDuration * 0.5}s`,
                                        }}
                                    />
                                </div>
                            ))}
                        </div>
                    )}

                    {/* Winner Modal */}
                    {winner && showConfetti && (
                        <div className="fixed inset-0 z-40 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fade-in">
                            <div className="bg-gradient-to-br from-yellow-400 via-orange-500 to-pink-500 p-1 rounded-3xl animate-scale-in">
                                <div className="bg-gray-900 rounded-3xl p-8 sm:p-12 text-center">
                                    <Trophy size={isMobile ? 64 : 96} className="text-yellow-400 mx-auto mb-4 animate-bounce" />
                                    <h2 className="text-3xl sm:text-5xl font-bold text-white mb-2">üéâ WINNER! üéâ</h2>
                                    <p className="text-4xl sm:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-orange-400 to-pink-400 mb-4">
                                        {winner}
                                    </p>
                                    <p className="text-gray-300 text-lg sm:text-xl">Congratulations!</p>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="max-w-7xl w-full">
                        <div className="text-center mb-6 sm:mb-8">
                            <h1 className="text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-2 flex items-center justify-center gap-2 sm:gap-3 flex-wrap">
                                <Sparkles size={isMobile ? 30 : 40} className="text-yellow-300 animate-pulse" />
                                Lucky Spin
                                <Sparkles size={isMobile ? 30 : 40} className="text-yellow-300 animate-pulse" />
                            </h1>
                            <p className="text-blue-200 text-base sm:text-lg">Spin the wheel and pick a winner!</p>
                        </div>

                        <div className="grid lg:grid-cols-2 gap-6 sm:gap-8">
                            {/* Wheel Section */}
                            <div className="bg-white/10 backdrop-blur-lg rounded-2xl sm:rounded-3xl p-4 sm:p-8 shadow-2xl">
                                <div className="relative w-full aspect-square max-w-md mx-auto">
                                    {/* Arrow Pointer */}
                                    <div className="absolute top-0 left-1/2 -translate-x-1/2 z-20 -translate-y-4 sm:-translate-y-6">
                                        <div className="relative">
                                            <div className="absolute left-1/2 -translate-x-1/2 w-2 sm:w-3 h-10 sm:h-16 bg-gradient-to-b from-red-500 to-red-600 rounded-t-full" />
                                            <div className="relative">
                                                <div className="w-0 h-0 border-l-[18px] sm:border-l-[28px] border-l-transparent border-r-[18px] sm:border-r-[28px] border-r-transparent border-t-[24px] sm:border-t-[36px] border-t-red-500 drop-shadow-2xl" 
                                                    style={{ filter: 'drop-shadow(0 4px 6px rgba(239, 68, 68, 0.5))' }} />
                                            </div>
                                            <div className="absolute bottom-0 left-1/2 -translate-x-1/2 flex gap-1">
                                                <div className="w-2 sm:w-3 h-3 sm:h-4 bg-yellow-400 transform -rotate-45 origin-bottom-right" />
                                                <div className="w-2 sm:w-3 h-3 sm:h-4 bg-yellow-400 transform rotate-45 origin-bottom-left" />
                                            </div>
                                            <div className="absolute top-0 left-1/2 -translate-x-1/2 w-6 sm:w-10 h-6 sm:h-10 bg-red-500 rounded-full blur-lg opacity-60 animate-pulse" />
                                        </div>
                                    </div>
                                    
                                    {/* Wheel */}
                                    <div className="relative w-full h-full">
                                        <svg
                                            ref={wheelRef}
                                            viewBox="0 0 200 200"
                                            className="w-full h-full drop-shadow-2xl"
                                            style={{
                                                transform: `rotate(${rotation}deg)`,
                                                transition: isSpinning ? 'transform 5s cubic-bezier(0.17, 0.67, 0.10, 1.00)' : 'transform 0.5s ease-out',
                                            }}
                                        >
                                            <circle cx="100" cy="100" r="99" fill="url(#gold-gradient)" />
                                            <circle cx="100" cy="100" r="96" fill="#1e293b" />
                                            
                                            <defs>
                                                <linearGradient id="gold-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                    <stop offset="0%" stopColor="#fbbf24" />
                                                    <stop offset="50%" stopColor="#f59e0b" />
                                                    <stop offset="100%" stopColor="#fbbf24" />
                                                </linearGradient>
                                                
                                                {colors.map((color, i) => (
                                                    <linearGradient key={i} id={`gradient-${i}`} x1="0%" y1="0%" x2="100%" y2="100%">
                                                        <stop offset="0%" stopColor={color} />
                                                        <stop offset="100%" stopColor={`${color}dd`} />
                                                    </linearGradient>
                                                ))}
                                            </defs>
                                            
                                            {names.map((name, i) => {
                                                const startAngle = i * segmentAngle - 90;
                                                const endAngle = (i + 1) * segmentAngle - 90;
                                                
                                                const x1 = 100 + 85 * Math.cos((startAngle * Math.PI) / 180);
                                                const y1 = 100 + 85 * Math.sin((startAngle * Math.PI) / 180);
                                                const x2 = 100 + 85 * Math.cos((endAngle * Math.PI) / 180);
                                                const y2 = 100 + 85 * Math.sin((endAngle * Math.PI) / 180);
                                                
                                                const largeArc = segmentAngle > 180 ? 1 : 0;
                                                
                                                const textAngle = startAngle + segmentAngle / 2;
                                                const textRadius = 55;
                                                const textX = 100 + textRadius * Math.cos((textAngle * Math.PI) / 180);
                                                const textY = 100 + textRadius * Math.sin((textAngle * Math.PI) / 180);
                                                
                                                return (
                                                    <g key={i}>
                                                        <path
                                                            d={`M 100 100 L ${x1} ${y1} A 85 85 0 ${largeArc} 1 ${x2} ${y2} Z`}
                                                            fill={`url(#gradient-${i % colors.length})`}
                                                            stroke="#1e293b"
                                                            strokeWidth="2.5"
                                                        />
                                                        <text
                                                            x={textX}
                                                            y={textY}
                                                            textAnchor="middle"
                                                            dominantBaseline="middle"
                                                            transform={`rotate(${textAngle + 90}, ${textX}, ${textY})`}
                                                            fill="white"
                                                            fontWeight="bold"
                                                            fontSize="8px"
                                                            style={{ textShadow: '1px 1px 2px rgba(0,0,0,0.5)' }}
                                                        >
                                                            {name}
                                                        </text>
                                                    </g>
                                                );
                                            })}
                                            
                                            <circle cx="100" cy="100" r="20" fill="url(#gold-gradient)" stroke="#1e293b" strokeWidth="3" />
                                            <circle cx="100" cy="100" r="12" fill="#1e293b" />
                                            <circle cx="100" cy="100" r="6" fill="#fbbf24" />
                                        </svg>
                                    </div>
                                </div>

                                <button
                                    onClick={spinWheel}
                                    disabled={isSpinning || names.length === 0}
                                    className="mt-6 sm:mt-8 w-full bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 text-gray-900 font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl sm:rounded-2xl text-lg sm:text-xl shadow-lg hover:shadow-2xl transform hover:scale-105 active:scale-95 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex items-center justify-center gap-2 sm:gap-3"
                                >
                                    <Play size={isMobile ? 20 : 24} fill="currentColor" />
                                    {isSpinning ? 'SPINNING...' : 'SPIN THE WHEEL'}
                                </button>

                                {winner && !showConfetti && (
                                    <div className="mt-4 sm:mt-6 bg-gradient-to-r from-green-400 to-emerald-500 rounded-xl sm:rounded-2xl p-4 sm:p-6 text-center transform animate-bounce-in">
                                        <p className="text-white text-base sm:text-lg font-semibold mb-1">üéâ WINNER üéâ</p>
                                        <p className="text-white text-2xl sm:text-3xl font-bold">{winner}</p>
                                    </div>
                                )}
                            </div>

                            {/* Control Panel */}
                            <div className="bg-white/10 backdrop-blur-lg rounded-2xl sm:rounded-3xl p-4 sm:p-8 shadow-2xl">
                                <h2 className="text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6">Participants</h2>
                                
                                <div className="flex gap-2 mb-4 sm:mb-6">
                                    <input
                                        type="text"
                                        value={newName}
                                        onChange={(e) => setNewName(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && addName()}
                                        placeholder="Enter a name..."
                                        className="flex-1 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl bg-white/20 text-white placeholder-blue-200 border-2 border-white/30 focus:border-yellow-400 focus:outline-none transition-all text-sm sm:text-base"
                                    />
                                    <button
                                        onClick={addName}
                                        disabled={names.length >= 12}
                                        className="bg-yellow-400 text-gray-900 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-xl hover:bg-yellow-300 active:scale-95 transition-all flex items-center gap-1 sm:gap-2 font-semibold text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-yellow-400"
                                        title={names.length >= 12 ? "Maximum 12 participants reached" : "Add participant"}
                                    >
                                        <Plus size={isMobile ? 18 : 20} />
                                        Add
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-64 sm:max-h-96 overflow-y-auto pr-2 custom-scrollbar">
                                    {names.map((name, i) => (
                                        <div
                                            key={i}
                                            className="bg-white/20 backdrop-blur rounded-lg sm:rounded-xl p-3 sm:p-4 flex items-center justify-between group hover:bg-white/30 transition-all transform hover:scale-[1.02] active:scale-[0.98]"
                                        >
                                            <div className="flex items-center gap-2 sm:gap-3">
                                                <div
                                                    className="w-3 h-3 sm:w-4 sm:h-4 rounded-full shadow-lg"
                                                    style={{ backgroundColor: colors[i % colors.length] }}
                                                />
                                                <span className="text-white font-medium text-base sm:text-lg">{name}</span>
                                            </div>
                                            <button
                                                onClick={() => removeName(name)}
                                                className="text-red-300 hover:text-red-400 opacity-70 sm:opacity-0 group-hover:opacity-100 transition-all hover:scale-110 active:scale-90"
                                                disabled={names.length <= 2}
                                                title={names.length <= 2 ? "Need at least 2 participants" : "Remove"}
                                            >
                                                <Trash2 size={isMobile ? 16 : 18} />
                                            </button>
                                        </div>
                                    ))}
                                </div>

                                <div className="mt-4 sm:mt-6 text-center text-blue-200">
                                    <p className="text-xs sm:text-sm">
                                        Total participants: <span className="font-bold text-white text-base sm:text-lg">{names.length}</span>
                                        <span className="text-blue-300"> / 12</span>
                                    </p>
                                    {names.length < 2 && (
                                        <p className="text-yellow-300 text-xs sm:text-sm mt-2">‚ö†Ô∏è Add at least 2 names to spin</p>
                                    )}
                                    {names.length >= 12 && (
                                        <p className="text-orange-300 text-xs sm:text-sm mt-2">‚úì Maximum participants reached</p>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<LotteryWheel />);
    </script>
</body>
</html>